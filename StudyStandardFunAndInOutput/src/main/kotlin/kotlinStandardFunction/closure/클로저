클로저

람다식을 사용하다 보면 내부 함수에서 외부 변수를 호출하고 싶을 때가 있다.
클로저(Closure)란 람다식으로 표현된 내부 함수에서 외부 범위에 선언된 변수에 접근할 수 있는 개념을 말한다.
이때 람다식 안에 있는 외부 변수는 값을 유지하기 위해 람다식이 포획(Capture)한 변수라고 부른다.

기본적으로 함수 안에 정의된 변수는 지역 변수로 스택에 저장되어 있다가 함수가 끝나면 같이 사라진다.
하지만 클로저 개념에서는 포획한 변수는 유지되어 함수가 종료되어도 사라지지 않고
함수의 변수에 접근하거나 수정할 수 있게 해 준다.

클로저의 조건
- final 변수를 포획한 경우 변수 값을 람다식과 함께 저장한다.
- final이 아닌 변수를 포획한 경우 변수를 특정 래퍼(wrapper)로 감싸서 나중에
변경하거나 읽을 수 있게 한다. 이때 래퍼에 대한 참조를 람다식과 함께 저장한다.

자바엣는 외부의 변수를 포획할 때 final만 포획할 수 있다.
따라서 코틀린에서 final이 아닌 변수를 사용하면 내부적으로 변환된 자바 코드에서
배열이나 클래스를 만들고 final로 지정해 사용한다.

